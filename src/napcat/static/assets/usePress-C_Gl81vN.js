import{bZ as ie,bD as se,bC as R,b_ as oe,bW as J,bU as le,aD as m,b$ as V,c0 as fe,c1 as ce,c2 as g,c3 as $,c4 as de,c5 as ue,bV as M,c6 as pe,O as Q,c7 as ve,c8 as $e,_ as W,A as be,D as ge,c9 as ye,X as Pe,bn as z}from"./index-BVRNTeCQ.js";import{r as E}from"./react-router-dom-BuK5Vxqh.js";const he=E.createContext({isNative:!0,open:Ee,useHref:t=>t});function ee(){return E.useContext(he)}function Se(t,s){let n=t.getAttribute("target");return(!n||n==="_self")&&t.origin===location.origin&&!t.hasAttribute("download")&&!s.metaKey&&!s.ctrlKey&&!s.altKey&&!s.shiftKey}function S(t,s,n=!0){var o,f;let{metaKey:p,ctrlKey:v,altKey:u,shiftKey:h}=s;ie()&&(!((f=window.event)===null||f===void 0||(o=f.type)===null||o===void 0)&&o.startsWith("key"))&&t.target==="_blank"&&(R()?p=!0:v=!0);let T=se()&&R()&&!oe()?new KeyboardEvent("keydown",{keyIdentifier:"Enter",metaKey:p,ctrlKey:v,altKey:u,shiftKey:h}):new MouseEvent("click",{metaKey:p,ctrlKey:v,altKey:u,shiftKey:h,bubbles:!0,cancelable:!0});S.isOpening=n,J(t),t.dispatchEvent(T),S.isOpening=!1}S.isOpening=!1;function Te(t,s){if(t instanceof HTMLAnchorElement)s(t);else if(t.hasAttribute("data-href")){let n=document.createElement("a");n.href=t.getAttribute("data-href"),t.hasAttribute("data-target")&&(n.target=t.getAttribute("data-target")),t.hasAttribute("data-rel")&&(n.rel=t.getAttribute("data-rel")),t.hasAttribute("data-download")&&(n.download=t.getAttribute("data-download")),t.hasAttribute("data-ping")&&(n.ping=t.getAttribute("data-ping")),t.hasAttribute("data-referrer-policy")&&(n.referrerPolicy=t.getAttribute("data-referrer-policy")),t.appendChild(n),s(n),t.removeChild(n)}}function Ee(t,s){Te(t,n=>S(n,s))}function Ae(t){let s=ee();var n;const o=s.useHref((n=t.href)!==null&&n!==void 0?n:"");return{"data-href":t.href?o:void 0,"data-target":t.target,"data-rel":t.rel,"data-download":t.download,"data-ping":t.ping,"data-referrer-policy":t.referrerPolicy}}function Ce(t){let s=ee();var n;const o=s.useHref((n=t==null?void 0:t.href)!==null&&n!==void 0?n:"");return{href:t!=null&&t.href?o:void 0,target:t==null?void 0:t.target,rel:t==null?void 0:t.rel,download:t==null?void 0:t.download,ping:t==null?void 0:t.ping,referrerPolicy:t==null?void 0:t.referrerPolicy}}function xe(t){let s=E.useContext(ve);if(s){let{register:n,...o}=s;t=Q(o,t),n()}return $e(s,t.ref),t}var L=new WeakMap;class O{continuePropagation(){W(this,L,!1)}get shouldStopPropagation(){return be(this,L)}constructor(s,n,o,f){ge(this,L,{writable:!0,value:void 0}),W(this,L,!0);var p;let v=(p=f==null?void 0:f.target)!==null&&p!==void 0?p:o.currentTarget;const u=v==null?void 0:v.getBoundingClientRect();let h,T=0,A,y=null;o.clientX!=null&&o.clientY!=null&&(A=o.clientX,y=o.clientY),u&&(A!=null&&y!=null?(h=A-u.left,T=y-u.top):(h=u.width/2,T=u.height/2)),this.type=s,this.pointerType=n,this.target=o.currentTarget,this.shiftKey=o.shiftKey,this.metaKey=o.metaKey,this.ctrlKey=o.ctrlKey,this.altKey=o.altKey,this.x=h,this.y=T}}const G=Symbol("linkClicked"),Z="react-aria-pressable-style",j="data-react-aria-pressable";function _e(t){let{onPress:s,onPressChange:n,onPressStart:o,onPressEnd:f,onPressUp:p,onClick:v,isDisabled:u,isPressed:h,preventFocusOnPress:T,shouldCancelOnPointerExit:A,allowTextSelectionOnPress:y,ref:D,...re}=xe(t),[ae,Y]=E.useState(!1),K=E.useRef({isPressed:!1,ignoreEmulatedMouseEvents:!1,didFirePressStart:!1,isTriggeringEvent:!1,activePointerId:null,target:null,isOverTarget:!1,pointerType:null,disposables:[]}),{addGlobalListener:C,removeAllGlobalListeners:H}=le(),_=m((e,i)=>{let c=K.current;if(u||c.didFirePressStart)return!1;let r=!0;if(c.isTriggeringEvent=!0,o){let l=new O("pressstart",i,e);o(l),r=l.shouldStopPropagation}return n&&n(!0),c.isTriggeringEvent=!1,c.didFirePressStart=!0,Y(!0),r}),k=m((e,i,c=!0)=>{let r=K.current;if(!r.didFirePressStart)return!1;r.didFirePressStart=!1,r.isTriggeringEvent=!0;let l=!0;if(f){let a=new O("pressend",i,e);f(a),l=a.shouldStopPropagation}if(n&&n(!1),Y(!1),s&&c&&!u){let a=new O("press",i,e);s(a),l&&(l=a.shouldStopPropagation)}return r.isTriggeringEvent=!1,l}),I=m((e,i)=>{let c=K.current;if(u)return!1;if(p){c.isTriggeringEvent=!0;let r=new O("pressup",i,e);return p(r),c.isTriggeringEvent=!1,r.shouldStopPropagation}return!0}),x=m(e=>{let i=K.current;if(i.isPressed&&i.target){i.didFirePressStart&&i.pointerType!=null&&k(w(i.target,e),i.pointerType,!1),i.isPressed=!1,i.isOverTarget=!1,i.activePointerId=null,i.pointerType=null,H(),y||V(i.target);for(let c of i.disposables)c();i.disposables=[]}}),B=m(e=>{A&&x(e)}),U=m(e=>{v==null||v(e)}),N=m((e,i)=>{if(v){let c=new MouseEvent("click",e);fe(c,i),v(ce(c))}}),ne=E.useMemo(()=>{let e=K.current,i={onKeyDown(r){if(F(r.nativeEvent,r.currentTarget)&&g(r.currentTarget,$(r.nativeEvent))){var l;q($(r.nativeEvent),r.key)&&r.preventDefault();let a=!0;if(!e.isPressed&&!r.repeat){e.target=r.currentTarget,e.isPressed=!0,e.pointerType="keyboard",a=_(r,"keyboard");let d=r.currentTarget,b=P=>{F(P,d)&&!P.repeat&&g(d,$(P))&&e.target&&I(w(e.target,P),"keyboard")};C(M(r.currentTarget),"keyup",Pe(b,c),!0)}a&&r.stopPropagation(),r.metaKey&&R()&&((l=e.metaKeyEvents)===null||l===void 0||l.set(r.key,r.nativeEvent))}else r.key==="Meta"&&(e.metaKeyEvents=new Map)},onClick(r){if(!(r&&!g(r.currentTarget,$(r.nativeEvent)))&&r&&r.button===0&&!e.isTriggeringEvent&&!S.isOpening){let l=!0;if(u&&r.preventDefault(),!e.ignoreEmulatedMouseEvents&&!e.isPressed&&(e.pointerType==="virtual"||ye(r.nativeEvent))){let a=_(r,"virtual"),d=I(r,"virtual"),b=k(r,"virtual");U(r),l=a&&d&&b}else if(e.isPressed&&e.pointerType!=="keyboard"){let a=e.pointerType||r.nativeEvent.pointerType||"virtual";l=k(w(r.currentTarget,r),a,!0),e.isOverTarget=!1,U(r),x(r)}e.ignoreEmulatedMouseEvents=!1,l&&r.stopPropagation()}}},c=r=>{var l;if(e.isPressed&&e.target&&F(r,e.target)){var a;q($(r),r.key)&&r.preventDefault();let b=$(r),P=g(e.target,$(r));k(w(e.target,r),"keyboard",P),P&&N(r,e.target),H(),r.key!=="Enter"&&X(e.target)&&g(e.target,b)&&!r[G]&&(r[G]=!0,S(e.target,r,!1)),e.isPressed=!1,(a=e.metaKeyEvents)===null||a===void 0||a.delete(r.key)}else if(r.key==="Meta"&&(!((l=e.metaKeyEvents)===null||l===void 0)&&l.size)){var d;let b=e.metaKeyEvents;e.metaKeyEvents=void 0;for(let P of b.values())(d=e.target)===null||d===void 0||d.dispatchEvent(new KeyboardEvent("keyup",P))}};if(typeof PointerEvent<"u"){i.onPointerDown=a=>{if(a.button!==0||!g(a.currentTarget,$(a.nativeEvent)))return;if(de(a.nativeEvent)){e.pointerType="virtual";return}e.pointerType=a.pointerType;let d=!0;if(!e.isPressed){e.isPressed=!0,e.isOverTarget=!0,e.activePointerId=a.pointerId,e.target=a.currentTarget,y||ue(e.target),d=_(a,e.pointerType);let b=$(a.nativeEvent);"releasePointerCapture"in b&&b.releasePointerCapture(a.pointerId),C(M(a.currentTarget),"pointerup",r,!1),C(M(a.currentTarget),"pointercancel",l,!1)}d&&a.stopPropagation()},i.onMouseDown=a=>{if(g(a.currentTarget,$(a.nativeEvent))&&a.button===0){if(T){let d=pe(a.target);d&&e.disposables.push(d)}a.stopPropagation()}},i.onPointerUp=a=>{!g(a.currentTarget,$(a.nativeEvent))||e.pointerType==="virtual"||a.button===0&&I(a,e.pointerType||a.pointerType)},i.onPointerEnter=a=>{a.pointerId===e.activePointerId&&e.target&&!e.isOverTarget&&e.pointerType!=null&&(e.isOverTarget=!0,_(w(e.target,a),e.pointerType))},i.onPointerLeave=a=>{a.pointerId===e.activePointerId&&e.target&&e.isOverTarget&&e.pointerType!=null&&(e.isOverTarget=!1,k(w(e.target,a),e.pointerType,!1),B(a))};let r=a=>{if(a.pointerId===e.activePointerId&&e.isPressed&&a.button===0&&e.target){if(g(e.target,$(a))&&e.pointerType!=null){let d=!1,b=setTimeout(()=>{e.isPressed&&e.target instanceof HTMLElement&&(d?x(a):(J(e.target),e.target.click()))},80);C(a.currentTarget,"click",()=>d=!0,!0),e.disposables.push(()=>clearTimeout(b))}else x(a);e.isOverTarget=!1}},l=a=>{x(a)};i.onDragStart=a=>{g(a.currentTarget,$(a.nativeEvent))&&x(a)}}return i},[C,u,T,H,y,x,B,k,_,I,U,N]);return E.useEffect(()=>{if(!D)return;const e=M(D.current);if(!e||!e.head||e.getElementById(Z))return;const i=e.createElement("style");i.id=Z,i.textContent=`
@layer {
  [${j}] {
    touch-action: pan-x pan-y pinch-zoom;
  }
}
    `.trim(),e.head.prepend(i)},[D]),E.useEffect(()=>{let e=K.current;return()=>{var i;y||V((i=e.target)!==null&&i!==void 0?i:void 0);for(let c of e.disposables)c();e.disposables=[]}},[y]),{isPressed:h||ae,pressProps:Q(re,ne,{[j]:!0})}}function X(t){return t.tagName==="A"&&t.hasAttribute("href")}function F(t,s){const{key:n,code:o}=t,f=s,p=f.getAttribute("role");return(n==="Enter"||n===" "||n==="Spacebar"||o==="Space")&&!(f instanceof z(f).HTMLInputElement&&!te(f,n)||f instanceof z(f).HTMLTextAreaElement||f.isContentEditable)&&!((p==="link"||!p&&X(f))&&n!=="Enter")}function w(t,s){let n=s.clientX,o=s.clientY;return{currentTarget:t,shiftKey:s.shiftKey,ctrlKey:s.ctrlKey,metaKey:s.metaKey,altKey:s.altKey,clientX:n,clientY:o}}function me(t){return t instanceof HTMLInputElement?!1:t instanceof HTMLButtonElement?t.type!=="submit"&&t.type!=="reset":!X(t)}function q(t,s){return t instanceof HTMLInputElement?!te(t,s):me(t)}const Ke=new Set(["checkbox","radio","range","color","file","image","button","submit","reset"]);function te(t,s){return t.type==="checkbox"||t.type==="radio"?s===" ":Ke.has(t.type)}export{_e as $,ee as a,Se as b,Ae as c,Ce as d,S as e};
